<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Keyboard Switches</title>

    <link rel="stylesheet"
          href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/bootstrap/5.0.0-alpha2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/ionicons/2.0.0/css/ionicons.min.css">
    <link rel="stylesheet" href="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/animate.css/4.1.1/animate.min.css">
    <link href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery-nice-select/1.0/css/nice-select.min.css"
          type="text/css" rel="stylesheet"/>
    <link rel="stylesheet" href="/assets/css/style.css">
    <script src="https://unpkg.com/turbolinks"></script>

    <style>
        .preloader {
            position: fixed;
            top: 0;
            z-index: 9999;
            background: #fff;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: height 0.8s cubic-bezier(0.075, 0.82, 0.165, 1);
        }

        .preloader.loaded {
            height: 0;
        }

        .preloader h1 {
            color: black;
        }

        /* Fix table layout to disable responsiveness */
        .square-table {
            border-collapse: collapse;
            margin: 20px auto;
            border: 1px solid #ccc;
            table-layout: fixed; /* Ensures fixed column width */
        }

        .square-table th, .square-table td {
            width: 120px; /* Set fixed width */
            height: 120px; /* Set fixed height */
            min-width: 120px; /* Prevent shrinking on small screens */
            min-height: 120px; /* Prevent shrinking on small screens */
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
            vertical-align: middle; /* Ensures content is vertically centered */
        }

        .square-table th {
            background-color: #f4f4f4;
        }
        .hide {
            display: none;
        }
    </style>
</head>

<body>
<div class="preloader text-white fs-6 text-uppercase overflow-hidden"><h1>loading...</h1></div>
{% include 'new/canvas_menu.html' %}
<header class="header_section border-bottom">
    {% set active_menu = 'icgb' %}
    {% include 'new/main_header.html' %}

</header>
<div style="padding: 105px 0 110px;">
    <div style="display: flex; justify-content: center">
        <div class="sorting_by d-flex align-items-center">
            <span>SHOW BY :</span>
            <select name="orderby" id="short">
                {% for item in stor_boxs %}
                <option value="{{ item.word }}" {{'selected' if request.path_params.get("keyboard") == item.word }}>{{ item.word }}</option>
                {% endfor %}
            </select>
            <select name="orderby" id="mode">
                <option value="t" {{'selected' if request.query_params.get("mode") == 't' }}>文字</option>
                <option value="i" {{'selected' if request.query_params.get("mode") == 'i' }}>图片</option>
            </select>
        </div>

    </div>
    <div>
        <table class="square-table">
            <tbody id="imgTable"  class="{{'' if request.query_params.get("mode") == 'i' else 'hide' }}">
                {% for row in data %}
                    <tr>
                        {% for cell in row %}
                            <td>
                                {% if cell is not none %}
                                <a href="/collections/products/{{cell.id}}" target="_blank">
                                <div><img style="width: 96px;height: 74px;display: block;margin: 3px auto 0 auto;" src="{{cell.pic}}?x-process=image/convert,m_webp" alt="{{ cell.name }}"></div>
                                <div style="height: 20px; overflow: hidden">{{ cell.name }}</div>
                                </a>
                                {% endif %}
                            </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
            <tbody id="textTable" class="{{'hide' if request.query_params.get("mode") == 'i' }}">
                {% for row in data %}
                    <tr>
                        {% for cell in row %}
                            <td><a href="/collections/products/{{cell.id}}" target="_blank">{{ cell.name }}</a></td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% include 'new/footer_widgets.html' %}
<script src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js"></script>
{#<script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/bootstrap/5.0.0-alpha2/js/bootstrap.min.js"></script>#}
<script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery-nice-select/1.0/js/jquery.nice-select.min.js"
        type="application/javascript"></script>
<script src="/assets/js/main.js"></script>
<script>
$(document).on('turbolinks:load', function () {
            $(".preloader").addClass("loaded");
            console.log('dsdsdsd')
        });
    $(document).ready(function () {

        $('select,.select_option').niceSelect();
        $('#short').on('change', function() {
                let selectedValue = $('#short').val();
                let mode = $('#mode').val();
            if (mode === 't') {
                Turbolinks.visit('/collections/keyboard/' + selectedValue);
                return;
            }
            Turbolinks.visit('/collections/keyboard/' + selectedValue + '?mode='+mode);
        });

        $('#mode').on('change', function() {
            let mode = $('#mode').val();
            if (mode === 't') {
                $('#textTable').show();
                $('#imgTable').hide();
            }else{
                $('#textTable').hide();
                $('#imgTable').show();
            }
        });
    });
</script>
</body>
</html>
